!function(e){"function"==typeof define&&define.amd?module.exports=function(o,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(o)),e(c),c}:e(jQuery)}(function(e){"use strict";e.extend(e.FroalaEditor.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),e.extend(e.FroalaEditor.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"&#x1f600;",desc:"Grinning face"},{code:"&#x1f601;",desc:"Grinning face with smiling eyes"},{code:"&#x1f602;",desc:"Face with tears of joy"},{code:"&#x1f603;",desc:"Smiling face with open mouth"},{code:"&#x1f604;",desc:"Smiling face with open mouth and smiling eyes"},{code:"&#x1f605;",desc:"Smiling face with open mouth and cold sweat"},{code:"&#x1f606;",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"&#x1f607;",desc:"Smiling face with halo"},{code:"&#x1f608;",desc:"Smiling face with horns"},{code:"&#x1f609;",desc:"Winking face"},{code:"&#x1f60a;",desc:"Smiling face with smiling eyes"},{code:"&#x1f60b;",desc:"Face savoring delicious food"},{code:"&#x1f60c;",desc:"Relieved face"},{code:"&#x1f60d;",desc:"Smiling face with heart-shaped eyes"},{code:"&#x1f60e;",desc:"Smiling face with sunglasses"},{code:"&#x1f60f;",desc:"Smirking face"},{code:"&#x1f610;",desc:"Neutral face"},{code:"&#x1f611;",desc:"Expressionless face"},{code:"&#x1f612;",desc:"Unamused face"},{code:"&#x1f613;",desc:"Face with cold sweat"},{code:"&#x1f614;",desc:"Pensive face"},{code:"&#x1f615;",desc:"Confused face"},{code:"&#x1f616;",desc:"Confounded face"},{code:"&#x1f617;",desc:"Kissing face"},{code:"&#x1f618;",desc:"Face throwing a kiss"},{code:"&#x1f619;",desc:"Kissing face with smiling eyes"},{code:"&#x1f61a;",desc:"Kissing face with closed eyes"},{code:"&#x1f61b;",desc:"Face with stuck out tongue"},{code:"&#x1f61c;",desc:"Face with stuck out tongue and winking eye"},{code:"&#x1f61d;",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"&#x1f61e;",desc:"Disappointed face"},{code:"&#x1f61f;",desc:"Worried face"},{code:"&#x1f620;",desc:"Angry face"},{code:"&#x1f621;",desc:"Pouting face"},{code:"&#x1f622;",desc:"Crying face"},{code:"&#x1f623;",desc:"Persevering face"},{code:"&#x1f624;",desc:"Face with look of triumph"},{code:"&#x1f625;",desc:"Disappointed but relieved face"},{code:"&#x1f626;",desc:"Frowning face with open mouth"},{code:"&#x1f627;",desc:"Anguished face"},{code:"&#x1f628;",desc:"Fearful face"},{code:"&#x1f629;",desc:"Weary face"},{code:"&#x1f62a;",desc:"Sleepy face"},{code:"&#x1f62b;",desc:"Tired face"},{code:"&#x1f62c;",desc:"Grimacing face"},{code:"&#x1f62d;",desc:"Loudly crying face"},{code:"&#x1f62e;",desc:"Face with open mouth"},{code:"&#x1f62f;",desc:"Hushed face"},{code:"&#x1f630;",desc:"Face with open mouth and cold sweat"},{code:"&#x1f631;",desc:"Face screaming in fear"},{code:"&#x1f632;",desc:"Astonished face"},{code:"&#x1f633;",desc:"Flushed face"},{code:"&#x1f634;",desc:"Sleeping face"},{code:"&#x1f635;",desc:"Dizzy face"},{code:"&#x1f636;",desc:"Face without mouth"},{code:"&#x1f637;",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"]}),e.FroalaEditor.PLUGINS.emoticons=function(o){function c(){var e=o.$tb.find('.fr-command[data-cmd="emoticons"]'),c=o.popups.get("emoticons");if(c||(c=s()),!c.hasClass("fr-active")){o.popups.refresh("emoticons"),o.popups.setContainer("emoticons",o.$tb);var t=e.offset().left+e.outerWidth()/2,i=e.offset().top+(o.opts.toolbarBottom?10:e.outerHeight()-10);o.popups.show("emoticons",t,i,e.outerHeight())}}function t(){o.popups.hide("emoticons")}function s(){var e="";o.opts.toolbarInline&&o.opts.emoticonsButtons.length>0&&(e='<div class="fr-buttons fr-emoticons-buttons">'+o.button.buildList(o.opts.emoticonsButtons)+"</div>");var c={buttons:e,emoticons:i()},t=o.popups.create("emoticons",c);return o.tooltip.bind(t,".fr-emoticon"),t}function i(){for(var e="<div>",c=0;c<o.opts.emoticonsSet.length;c++)0!==c&&c%o.opts.emoticonsStep==0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" data-cmd="insertEmoticon" title="'+o.language.translate(o.opts.emoticonsSet[c].desc)+'" data-param1="'+o.opts.emoticonsSet[c].code+'">'+o.opts.emoticonsSet[c].code+"</span>";return e+="</div>"}function n(c){o.html.insert('<span class="fr-emoticon">'+c+"</span>"+e.FroalaEditor.MARKERS,!0)}function d(){o.popups.hide("emoticons"),o.toolbar.showInline()}function a(){o.events.on("html.get",function(c){for(var t=0;t<o.opts.emoticonsSet.length;t++){var s=o.opts.emoticonsSet[t],i=e("<div>").html(s.code).text();c=c.split(i).join(s.code)}return c});var c=function(){if(!o.selection.isCollapsed())return!1;var c=o.selection.element(),t=o.selection.endElement();if(e(c).hasClass("fr-emoticon"))return c;if(e(t).hasClass("fr-emoticon"))return t;var s=o.selection.ranges(0),i=s.startContainer;if(i.nodeType==Node.ELEMENT_NODE&&i.childNodes.length>0&&s.startOffset>0){var n=i.childNodes[s.startOffset-1];if(e(n).hasClass("fr-emoticon"))return n}return!1};o.events.on("keydown",function(t){if(o.keys.isCharacter(t.which)&&o.selection.inEditor()){var s=o.selection.ranges(0),i=c();i&&(0===s.startOffset?e(i).before(e.FroalaEditor.MARKERS+e.FroalaEditor.INVISIBLE_SPACE):e(i).after(e.FroalaEditor.INVISIBLE_SPACE+e.FroalaEditor.MARKERS),o.selection.restore())}}),o.events.on("keyup",function(){for(var c=o.$el.get(0).querySelectorAll(".fr-emoticon"),t=0;t<c.length;t++)"undefined"!=typeof c[t].textContent&&0===c[t].textContent.replace(/\u200B/gi,"").length&&e(c[t]).remove()})}return{_init:a,insert:n,showEmoticonsPopup:c,hideEmoticonsPopup:t,back:d}},e.FroalaEditor.DefineIcon("emoticons",{NAME:"smile-o"}),e.FroalaEditor.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()}}),e.FroalaEditor.RegisterCommand("insertEmoticon",{callback:function(e,o){this.emoticons.insert(o),this.emoticons.hideEmoticonsPopup()}}),e.FroalaEditor.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),e.FroalaEditor.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}})});