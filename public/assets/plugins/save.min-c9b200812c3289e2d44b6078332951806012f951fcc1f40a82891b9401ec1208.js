!function(e){"function"==typeof define&&define.amd?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FroalaEditor.DEFAULTS,{saveInterval:1e3,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.FroalaEditor.PLUGINS.save=function(t){function n(e,n){t.events.trigger("save.error",[{code:e,message:d[e]},n])}function a(a){if(void 0===a&&(a=t.html.get()),!1===t.events.trigger("save.before"))return!1;if(t.opts.saveURL){var o={};for(var r in t.opts.saveParams){var s=t.opts.saveParams[r];o[r]="function"==typeof s?s.call(this):s}var i={};i[t.opts.saveParam]=a,e.ajax({type:t.opts.saveMethod,url:t.opts.saveURL,data:e.extend(i,o),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCORS},headers:t.opts.requestHeaders}).done(function(e){t.events.trigger("save.after",[e])}).fail(function(e){n(c,e.response)})}else n(l)}function o(){clearTimeout(u),u=setTimeout(function(){var e=t.html.get();(v!=e||f)&&(v=e,f=!1,a(e))},t.opts.saveInterval)}function r(){o(),f=!1}function s(){f=!0}function i(){t.opts.saveInterval&&(v=t.html.get(),t.events.on("contentChanged",o),t.events.on("keydown",function(){clearTimeout(u)}))}var u=null,v=null,f=!1,l=1,c=2,d={};return d[l]="Missing saveURL option.",d[c]="Something went wrong during save.",{_init:i,save:a,reset:r,force:s}},e.FroalaEditor.DefineIcon("save",{NAME:"floppy-o"}),e.FroalaEditor.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()}})});